# 播棋 (Mancala)

一款功能完整的簡單播棋（Mancala）網頁遊戲，支援單人對戰電腦與雙人對戰模式，具備多種 AI 難度與現代化 UI 動畫。

![Mancala Game Screenshot](https://github.com/user-attachments/assets/0aeb8caf-ce51-4ba6-b62b-bb08dd24b58c)  
*遊戲畫面示意（實際畫面請運行專案查看）*

##  遊戲簡介

播棋（Mancala）是一種歷史悠久的兩人棋類遊戲，玩家透過播撒棋子、捕獲對手棋子來獲得高分。  
本專案使用純 HTML、CSS、JavaScript 實作，具備響應式設計、流暢動畫、多種 AI 難度，並支援 PWA（漸進式網頁應用），可在手機、平板、電腦上遊玩。


##  主要功能

- **遊戲模式**
  - **單人練習**：挑戰五種不同難度的 AI
  - **雙人對戰**：與朋友在同一裝置上輪流遊玩

- **現代化 UI/UX**
  - 暗色系霓虹風格介面
  - 棋子飛行動畫、呼吸燈提示、捕獲閃光效果
  - 完全響應式設計（支援手機、平板、電腦）
  - 觸控與滑鼠雙優化

- **實用功能**
  - **上一步**：遊戲中可回溯至行動前的狀態
  - **遊戲重置**：隨時重新開始
  - **規則說明**：內建遊戲規則彈窗
  - **PWA 支援**：可安裝為桌面/手機應用
  - **離線遊玩**：透過 Service Worker 快取


##  快速開始

### 線上試玩
可直接在 GitHub Pages 上運行。
點擊[此連結](https://peter-qiu48763.github.io/mancala-test/)立即試玩。
在行動裝置下建議橫屏遊玩。

### 本地運行
1. 下載專案檔案（`index.html`、`manifest.json`、`sw.js`、`icon-192.png`）
2. 使用任何網頁伺服器開啟 `index.html`
   - 或直接雙擊 `index.html`（部分瀏覽器可能限制 Service Worker）

### 安裝為 PWA（手機/桌面）
1. 在支援的瀏覽器（Chrome、Edge、Safari）中使用[此連結](https://peter-qiu48763.github.io/mancala-test/)開啟遊戲
2. 點擊瀏覽器的「安裝應用程式」或「加到主畫面」提示（在Safari中，請點擊右上角分享中的加到主畫面）
3. 遊戲將以獨立視窗執行，並強制橫屏，無需瀏覽器介面


##  遊戲規則（簡要）

1. **目標**：遊戲結束時，己方計分洞內的棋子比對手多。

2. **移動**：
   - 點擊己方任一非空小洞
   - 取出該洞所有棋子，逆時針方向依序於每個後續洞放入一顆棋子

3. **計分洞**：
   - 經過自己的計分洞時放入一顆
   - 經過對手的計分洞時**跳過不放**

4. **再來一次**：
   - 最後一顆棋子落入自己的計分洞，可獲得**額外一回合**

5. **捕獲**：
   - 最後一顆落入己方**原本為空**的小洞，且對面洞有棋子
   - 則**該棋子與對面所有棋子**皆放入己方計分洞

6. **遊戲結束**：
   - 當一方所有小洞皆為空時結束
   - 對手剩餘的所有棋子歸入對手計分洞
   - 比較雙方計分洞棋子數量，多者獲勝


##  AI 設計說明

### 特別難度（使用 Minimax 算法 + Alpha-Beta 剪枝）
- 搜尋深度：6 層
- 評估函數：以 (AI分數 - 玩家分數) 為核心
- 處理「再來一次」規則：額外回合不減少搜尋深度
- 終局判定：模擬一方清空後的棋子歸屬計算
- 剪枝優化：按棋子數排序合法步，提升剪枝效率

加權參數設定較為保守，因此進攻性低，但 6 層的深度確保了其仍有一定強度。

### 其他難度策略
- **專家**：綜合開局庫、節奏優勢、威脅評估與局勢評分
- **困難**：避免給予對手明顯捕獲機會
- **普通**：優先再次行動，其次選擇可捕獲的步
- **簡單**：優先選擇能再次行動的步

除了**專家**有極小隨機性外，其餘難度的策略皆完全為可預測的。

##  專案結構

```
mancala-test/
├── index.html          # 主遊戲檔案（HTML+CSS+JS）
├── manifest.json       # PWA 設定檔
├── sw.js              # Service Worker 腳本
├── icon-192.png       # 應用程式圖示（192x192）
└── README.md          # 本說明文件
```


##  技術棧

- **HTML5**：語義化結構、PWA Manifest
- **CSS3**：CSS 變數、Flexbox、Grid、動畫、媒體查詢
- **JavaScript (ES6)**：模組化邏輯、Promise 動畫、Service Worker
- **PWA 技術**：Service Worker、Web App Manifest、離線支援
- **響應式設計**：行動優先、觸控優化


##  相容性

- 現代瀏覽器（Chrome 80+、Firefox 75+、Safari 14+、Edge 80+）
- 手機與平板（iOS Safari、Android Chrome）
- 支援觸控、滑鼠、鍵盤（Tab 導覽）
- 離線可用（PWA 安裝後）


##  自訂與擴展

### 修改難度
在 `expertConditionalAI()` 與 `getSpecialAIMove()` 中可自行調整評分權重或搜尋深度。

### 調整視覺
- CSS 變數（`:root`）控制顏色主題
- 修改 `animateSeedTransfer()` 調整動畫速度
- 調整媒體查詢斷點以適應特定裝置


##  許可證

本專案為展示用途，採用 MIT 許可證。  
歡迎 fork、修改與再發佈，請註明原始出處。


##  致謝

- 遊戲規則參考自傳統播棋（Mancala/Kalah）
- AI 演算法參考 Minimax 與棋類遊戲通用設計模式
- 設計靈感來自現代策略遊戲 UI

---

*如有問題或建議，歡迎提交 Issue 或 Pull Request。*
